/**
 * ì½”ë“œ ë¸”ë¡ í†µí•© ìŠ¤íƒ€ì¼ ì‹œíŠ¸
 * - ì½”ë“œ ë¸”ë¡ ê¸°ë³¸ ìŠ¤íƒ€ì¼
 * - ì¸ë¼ì¸ ì½”ë“œ ìŠ¤íƒ€ì¼
 * - ì½”ë“œ í† í° ìƒ‰ìƒ
 * - ì¤„ ë²ˆí˜¸ ë° í•˜ì´ë¼ì´íŠ¸
 * - ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼
 * - ì‹œê°ì  íš¨ê³¼
 */

/* ==================== ì½”ë“œ ë¸”ë¡ ê¸°ë³¸ ìŠ¤íƒ€ì¼ ==================== */

/* ì½”ë“œ ë¸”ë¡ ì»¨í…Œì´ë„ˆ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.prose pre {
  overflow-x: auto;
  overflow-y: hidden; /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ ì œê±° */
  @apply rounded-md bg-gray-800 dark:bg-gray-950;
  scrollbar-width: thin;
  box-shadow:
    0 2px 10px rgba(0, 0, 0, 0.12),
    0 0 1px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(60, 60, 60, 0.2);
  position: relative;
  transition: all 0.2s;
  cursor: text;
}

/* ì½”ë“œ ë¸”ë¡ ë‚´ë¶€ ìŠ¤íƒ€ì¼ */
.prose pre > code {
  display: grid;
  counter-reset: line;
  @apply border-0 bg-transparent p-0 text-[0.92em] font-normal;
  border-radius: 0.5rem;
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace !important;
  line-height: 1.6 !important;
}

/* ê° ì½”ë“œ ë¼ì¸ ìŠ¤íƒ€ì¼ */
.prose pre span[data-line] {
  @apply inline-block px-2 py-0.5 leading-relaxed;
  counter-increment: line;
  min-height: 1.5rem;
  border-left: 2px solid transparent;
}

/* ì½”ë“œ ë¸”ë¡ í˜¸ë²„ íš¨ê³¼ */
.prose pre span[data-line]:hover {
  background-color: rgba(99, 102, 241, 0.08);
}

/* ì½”ë“œ ë¸”ë¡ ë‹¤í¬ ëª¨ë“œì—ì„œì˜ í…ìŠ¤íŠ¸ ì„ ëª…ë„ ê°œì„  */
.dark .prose pre > code {
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.4);
}

/* ==================== ì¤„ ë²ˆí˜¸ ìŠ¤íƒ€ì¼ ==================== */

/* ì¤„ ë²ˆí˜¸ ì¹´ìš´í„° ì´ˆê¸°í™” */
.prose pre > code[data-line-numbers] {
  counter-reset: line;
}

/* ì¤„ ë²ˆí˜¸ í‘œì‹œ ìŠ¤íƒ€ì¼ */
.prose pre > code[data-line-numbers] span[data-line]::before {
  content: counter(line);
  display: inline-block;
  width: 1.5rem;
  margin-right: 0.75rem;
  color: rgba(115, 115, 115, 0.8);
  text-align: right;
  font-size: 0.85em;
  user-select: none;
  border-right: 1px solid rgba(115, 115, 115, 0.3);
  padding-right: 0.5rem;
}

/* ==================== í•˜ì´ë¼ì´íŠ¸ëœ ì¤„ ìŠ¤íƒ€ì¼ ==================== */

/* í•˜ì´ë¼ì´íŠ¸ëœ ì¤„ ìŠ¤íƒ€ì¼ */
.prose pre > code span[data-highlighted-line] {
  @apply border-y-0 border-l-2 border-blue-400 bg-indigo-400/10 dark:border-blue-500 dark:bg-slate-700/50;
  position: relative;
}

/* í•˜ì´ë¼ì´íŠ¸ëœ ì¤„ ê·¸ë¼ë””ì–¸íŠ¸ íš¨ê³¼ */
.prose pre > code span[data-highlighted-line]::after {
  content: "";
  position: absolute;
  right: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(to right, transparent, rgba(99, 102, 241, 0.05));
}

/* ==================== ì½”ë“œ ë¸”ë¡ ì œëª© ìŠ¤íƒ€ì¼ ==================== */

/* ì½”ë“œ ë¸”ë¡ ì œëª© ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.prose figcaption[data-rehype-pretty-code-title] {
  @apply rounded-t-lg border border-b-0 border-gray-200 bg-gray-200 px-5 py-2.5 font-mono text-sm font-bold text-gray-800 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200;
  border-bottom: 1px solid rgba(74, 85, 104, 0.3);
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
}

/* ì½”ë“œ ë¸”ë¡ ì œëª© í•˜ë‹¨ ê·¸ë¼ë””ì–¸íŠ¸ íš¨ê³¼ */
.prose figcaption[data-rehype-pretty-code-title]::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  height: 1px;
  width: 100%;
  background: linear-gradient(to right, rgba(99, 102, 241, 0.8), transparent);
}

/* ì½”ë“œ ë¸”ë¡ ì œëª© ì•„ì´ì½˜ */
.prose figcaption[data-rehype-pretty-code-title]::before {
  content: "ğŸ“„";
  margin-right: 1rem;
  font-size: 1rem;
}

/* ì½”ë“œ ë¸”ë¡ ì œëª©ì´ ìˆì„ ë•Œ ìƒë‹¨ ëª¨ì„œë¦¬ ì²˜ë¦¬ */
.prose figcaption[data-rehype-pretty-code-title] + pre {
  @apply mt-0 rounded-t-none;
}

/* ==================== ì¸ë¼ì¸ ì½”ë“œ ìŠ¤íƒ€ì¼ ==================== */

/* ì¸ë¼ì¸ ì½”ë“œì˜ ë°±í‹± ê¸°í˜¸ ì œê±° */
.prose :not(pre) > code::before,
.prose :not(pre) > code::after {
  display: none;
}

/* ì¸ë¼ì¸ ì½”ë“œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.prose :not(pre) > code {
  @apply relative mx-0.5 rounded-lg border-none px-2 py-1;
  background-color: rgb(243, 244, 246) !important; /* bg-gray-100 */
  color: rgb(225, 29, 72) !important; /* text-red-600 */
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
  letter-spacing: 0.02em !important;
  font-weight: 500 !important;
  font-size: 1em !important;
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace !important;
}

/* ì¸ë¼ì¸ ì½”ë“œ ë‹¤í¬ëª¨ë“œ ìŠ¤íƒ€ì¼ */
.dark .prose :not(pre) > code {
  background-color: rgb(39, 39, 42) !important; /* dark:bg-gray-700 */
  color: rgb(244, 114, 182) !important; /* dark:text-rose-400 */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;
}

/* ì¸ë¼ì¸ ì½”ë“œ í˜¸ë²„ íš¨ê³¼ */
.prose :not(pre) > code:hover {
  transform: translateY(-1px);
  transition: transform 0.2s;
}

/* ==================== ì½”ë“œ í† í° ìŠ¤íƒ€ì¼ ==================== */

/* HTML íƒœê·¸ */
.prose pre > code .token.tag {
  color: #7ee787 !important;
}

/* ì†ì„± ì´ë¦„ */
.prose pre > code .token.attr-name {
  color: #d2a8ff !important;
}

/* ì†ì„± ê°’ */
.prose pre > code .token.attr-value {
  color: #a5d6ff !important;
}

/* ì£¼ì„ */
.prose pre > code .token.comment {
  color: #8b949e !important;
  font-style: italic !important;
}

/* ë¬¸ìì—´ */
.prose pre > code .token.string {
  color: #a5d6ff !important;
}

/* ìˆ«ì */
.prose pre > code .token.number {
  color: #f2cc60 !important;
}

/* ë¶ˆë¦¬ì–¸ */
.prose pre > code .token.boolean {
  color: #ff7b72 !important;
}

/* í•¨ìˆ˜ */
.prose pre > code .token.function {
  color: #d2a8ff !important;
}

/* ì—°ì‚°ì */
.prose pre > code .token.operator {
  color: #ff7b72 !important;
}

/* í‚¤ì›Œë“œ */
.prose pre > code .token.keyword {
  color: #ff7b72 !important;
}

/* í”„ë¡œí¼í‹° */
.prose pre > code .token.property {
  color: #79c0ff !important;
}

/* ë„¤ì„ìŠ¤í˜ì´ìŠ¤ */
.prose pre > code .token.namespace {
  color: #ffa657 !important;
}

/* ==================== ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ ==================== */

/* ì¼ë°˜ì ìœ¼ë¡œ í˜ì´ì§€ì—ì„œëŠ” ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
html ::-webkit-scrollbar {
  display: none;
}

/* ì½”ë“œ ë¸”ë¡ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
.prose pre::-webkit-scrollbar {
  display: block !important;
  height: 3px !important;
  background-color: transparent !important;
  opacity: 0.5 !important;
  transition: all 0.3s !important;
}

/* í˜¸ë²„ì‹œ ìŠ¤í¬ë¡¤ë°” í¬ê¸° ì¡°ì • */
.prose pre:hover::-webkit-scrollbar {
  height: 5px !important;
  opacity: 1 !important;
}

/* ìŠ¤í¬ë¡¤ë°” ì¸ë„¤ì¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.prose pre::-webkit-scrollbar-thumb {
  background: linear-gradient(
    to right,
    rgba(74, 85, 104, 0.15),
    rgba(74, 85, 104, 0.3)
  ) !important;
  border-radius: 8px !important;
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1) !important;
  cursor: pointer !important;
  will-change: transform, background !important;
}

/* ë‹¤í¬ëª¨ë“œì—ì„œ ìŠ¤í¬ë¡¤ë°” ì¸ë„¤ì¼ ìŠ¤íƒ€ì¼ */
.dark .prose pre::-webkit-scrollbar-thumb {
  background: linear-gradient(
    to right,
    rgba(99, 102, 241, 0.15),
    rgba(99, 102, 241, 0.35)
  ) !important;
}

/* ì½”ë“œ ë¸”ë¡ í˜¸ë²„ì‹œ ìŠ¤í¬ë¡¤ë°” ì¸ë„¤ì¼ ìŠ¤íƒ€ì¼ */
.prose pre:hover::-webkit-scrollbar-thumb {
  background: linear-gradient(
    to right,
    rgba(74, 85, 104, 0.3),
    rgba(99, 102, 241, 0.4)
  ) !important;
  box-shadow: 0 0 3px rgba(99, 102, 241, 0.3) !important;
  transform: scaleX(0.98) !important;
}

/* ë‹¤í¬ëª¨ë“œì—ì„œ ì½”ë“œ ë¸”ë¡ í˜¸ë²„ì‹œ ìŠ¤í¬ë¡¤ë°” ì¸ë„¤ì¼ ìŠ¤íƒ€ì¼ */
.dark .prose pre:hover::-webkit-scrollbar-thumb {
  background: linear-gradient(
    to right,
    rgba(99, 102, 241, 0.3),
    rgba(129, 140, 248, 0.5)
  ) !important;
  box-shadow: 0 0 4px rgba(129, 140, 248, 0.4) !important;
}

/* ìŠ¤í¬ë¡¤ë°” ì¸ë„¤ì¼ í˜¸ë²„ íš¨ê³¼ */
.prose pre::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(
    to right,
    rgba(99, 102, 241, 0.5),
    rgba(129, 140, 248, 0.7)
  ) !important;
  box-shadow: 0 0 6px rgba(99, 102, 241, 0.5) !important;
  transform: scaleX(1.02) !important;
  transition: all 0.3s !important;
}

/* ë‹¤í¬ëª¨ë“œì—ì„œ ìŠ¤í¬ë¡¤ë°” ì¸ë„¤ì¼ í˜¸ë²„ íš¨ê³¼ */
.dark .prose pre::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(
    to right,
    rgba(129, 140, 248, 0.6),
    rgba(165, 180, 252, 0.8)
  ) !important;
  box-shadow: 0 0 8px rgba(129, 140, 248, 0.6) !important;
  transform: scaleX(1.02) !important;
}

/* ìŠ¤í¬ë¡¤ë°” íŠ¸ë™ ìŠ¤íƒ€ì¼ */
.prose pre::-webkit-scrollbar-track {
  background: transparent !important;
  border-radius: 8px !important;
  margin: 0 6px !important;
  transition: all 0.3s ease !important;
}

/* ì½”ë“œ ë¸”ë¡ í˜¸ë²„ì‹œ ìŠ¤í¬ë¡¤ë°” íŠ¸ë™ ìŠ¤íƒ€ì¼ */
.prose pre:hover::-webkit-scrollbar-track {
  background: rgba(226, 232, 240, 0.05) !important;
}

/* ë‹¤í¬ëª¨ë“œì—ì„œ ì½”ë“œ ë¸”ë¡ í˜¸ë²„ì‹œ ìŠ¤í¬ë¡¤ë°” íŠ¸ë™ ìŠ¤íƒ€ì¼ */
.dark .prose pre:hover::-webkit-scrollbar-track {
  background: rgba(30, 41, 59, 0.2) !important;
}

/* Firefox ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
.prose pre {
  scrollbar-width: thin !important;
  scrollbar-color: rgba(99, 102, 241, 0.3) transparent !important;
}
